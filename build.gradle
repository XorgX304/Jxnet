apply plugin: 'java'

group='com.ardikars.jxnet'

version = '1.1.0-SNAPSHOT'

subprojects.each { subproject -> evaluationDependsOn(subproject.path) }
jar.dependsOn subprojects.tasks["classes"]

jar {
    subprojects.each { subproject ->
        from subproject.sourceSets.main.output.classesDir
        from subproject.sourceSets.main.output.resourcesDir
    }
}

buildscript {
    ext {
        core_version="1.1.0-SNAPSHOT"
    }
}

task generateJavadoc(type: Javadoc) {
    doFirst {
        subprojects.each { project ->
            project.sourceSets.main.output.each { dir ->
                dir.mkdirs()
            }
        }
    }
    source subprojects.collect { project ->
        project.sourceSets.main.allJava
    }
    classpath = files(subprojects.collect { project ->
        project.sourceSets.main.compileClasspath
    })
    destinationDir file("$project.buildDir/docs/javadoc/")
}
