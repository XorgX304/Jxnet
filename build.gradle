
allprojects {
	
	apply plugin: 'java'

	group = 'com.ardikars.jxnet'
	version = '1.1.1-SHAPSHOT'

	sourceCompatibility = 1.8
	targetCompatibility = 1.8

	[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

	repositories {
		mavenCentral()
	}

}

apply from: 'config.gradle'

subprojects.each {
	subproject -> evaluationDependsOn(subproject.path)
}

jar.dependsOn subprojects.tasks["classes"]

jar {
	subprojects.each { subproject ->
		from subproject.sourceSets.main.output.classesDir
		from subproject.sourceSets.main.output.resourcesDir
	}
}

task ndkBuild(type: Exec) {
	commandLine "${NDK_HOME}/ndk-build", '-C', "${JXNET_DIR}",
			"NDK_LIBS_OUT=${JXNET_OUT}", "NDK_OUT=${JXNET_OBJ}"
}

task ndkClean(type: Exec) {
	commandLine "${NDK_HOME}/ndk-build", '-C', "${JXNET_DIR}", 'clean',
			"NDK_LIBS_OUT=${JXNET_OUT}", "NDK_OUT=${JXNET_OBJ}"
}

task ndkBuildTools(type: Exec) {
	commandLine "${NDK_HOME}/ndk-build", '-C', "${TOOLS_DIR}",
			"NDK_LIBS_OUT=${TOOLS_OUT}", "NDK_OUT=${TOOLS_OBJ}"
}

task ndkCleanTools(type: Exec) {
	commandLine "${NDK_HOME}/ndk-build", '-C', "${TOOLS_DIR}", 'clean',
			"NDK_LIBS_OUT=${TOOLS_OUT}", "NDK_OUT=${TOOLS_OBJ}"
}
